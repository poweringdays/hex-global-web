import{g as Ie,a as _e}from"./main-V_iPaBIi.js";let oe=[],ie=[],V="",H=0,ae=0,le=0,ee=0,I="",M=0,ne=0,se=0,te=0,_="",N=0,O=0,D=0,ge=0,q="",F=0,U=0,z=0,he=0,J="",W=0,A=0,X=0,Le=0,Q="",Y=0,P=0,K=0,be=0,Z="",h=!1;function $(){H>M?(I.style.color="rgb(0, 255, 0)",_.style.color="red",I.style.top="7%",_.style.top="9%"):H<M?(I.style.color="red",_.style.color="rgb(0, 255, 0)",I.style.top="9%",_.style.top="7%"):(I.style.color="white",_.style.color="white",I.style.top="",_.style.top=""),I.textContent=`Total Value: ${n(H)} Gold (${n(le)}-${n(ae)})`,_.textContent=`Total Value: ${n(M)} Gold (${n(se)}-${n(ne)})`}function de(e,t){H+=e.mediatorValue*t,le+=e.lowValue*t,ae+=e.highValue*t,$()}function ue(e,t){M+=e.mediatorValue*t,se+=e.lowValue*t,ne+=e.highValue*t,$()}function ve(e,t){H-=e.mediatorValue*t,le-=e.lowValue*t,ae-=e.highValue*t,$()}function we(e,t){M-=e.mediatorValue*t,se-=e.lowValue*t,ne-=e.highValue*t,$()}function G(){const e=Array.from(document.getElementsByClassName("tooltip"));for(const t of e)t.dataset.tooltipstatus==="loose"&&t.remove()}function Te(e){return e.includes("(")&&!e.includes("(Card)")&&(e=e.replace(/ \([^)]+\)/g,"").trim()),e=e.replace("#",""),e.replace(/\s+/g,"_")}let fe=null;document.addEventListener("mousemove",e=>{fe=document.elementFromPoint(e.clientX,e.clientY)});window.addEventListener("keydown",e=>{if(!(h||p.checkVisibility()||f.checkVisibility()||y.checkVisibility()||c.checkVisibility()||L.checkVisibility()||b.checkVisibility()||C.checkVisibility()||v.checkVisibility()))if(e.key==="f"||e.key==="g"||e.key==="h"){if(!fe.dataset.itemName)return;window.open("https://hexaria-full-version.fandom.com/wiki/"+Te(fe.dataset.itemName),"_blank")}else(e.key==="Enter"||e.key==="Backspace"||e.key==="r")&&re()});function ye(e,t,a,o,d){const r=document.createElement("div");return r.dataset.tooltipstatus="loose",r.id=a+"-tooltip",r.className="tooltip",e.tradeLocked===!0&&(r.style.color="red"),"formerOrigin"in e&&e.formerOrigin!==""?"reskin"in e&&e.reskin!==""?r.innerHTML="Total Value: "+n(e.mediatorValue*o)+" Gold ("+n(e.lowValue*o)+"-"+n(e.highValue*o)+")<br>Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Former Origin: "+e.formerOrigin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Reskin: "+e.reskin+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:r.innerHTML="Total Value: "+n(e.mediatorValue*o)+" Gold ("+n(e.lowValue*o)+"-"+n(e.highValue*o)+")<br>Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Former Origin: "+e.formerOrigin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:"reskin"in e&&e.reskin!==""?r.innerHTML="Total Value: "+n(e.mediatorValue*o)+" Gold ("+n(e.lowValue*o)+"-"+n(e.highValue*o)+")<br>Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Reskin: "+e.reskin+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:r.innerHTML="Total Value: "+n(e.mediatorValue*o)+" Gold ("+n(e.lowValue*o)+"-"+n(e.highValue*o)+")<br>Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated,r.style.border="1px solid rgb(255, 255, 255)",r.style.borderRadius="3px",document.body.appendChild(r),d?(t.addEventListener("mouseenter",()=>{r.style.display="block"}),t.addEventListener("mousemove",s=>{r.style.left=s.pageX-10-r.offsetWidth+"px",r.style.top=s.pageY+10+"px"}),t.addEventListener("mouseleave",()=>{r.style.display="none"})):(t.addEventListener("mouseenter",()=>{r.style.display="block"}),t.addEventListener("mousemove",s=>{r.style.left=s.pageX+10+"px",r.style.top=s.pageY+10+"px"}),t.addEventListener("mouseleave",()=>{r.style.display="none"})),r}function ce(e,t,a){const o=document.createElement("div");return o.dataset.tooltipstatus="loose",o.className="tooltip",e.tradeLocked===!0&&(o.style.color="red"),"formerOrigin"in e&&e.formerOrigin!==""?"reskin"in e&&e.reskin!==""?o.innerHTML="Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Former Origin: "+e.formerOrigin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Reskin: "+e.reskin+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:o.innerHTML="Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Former Origin: "+e.formerOrigin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:"reskin"in e&&e.reskin!==""?o.innerHTML="Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Reskin: "+e.reskin+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:o.innerHTML="Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated,o.style.border="1px solid rgb(255, 255, 255)",o.style.borderRadius="3px",document.body.appendChild(o),t.addEventListener("mouseenter",()=>{o.style.display="block"}),t.addEventListener("mousemove",d=>{o.style.left=d.pageX+10+"px",o.style.top=d.pageY+10+"px"}),t.addEventListener("mouseleave",()=>{o.style.display="none"}),o}function pe(e,t){"formerOrigin"in e&&e.formerOrigin!==""?"reskin"in e&&e.reskin!==""?t.innerHTML="Total Value: "+n(e.mediatorValue*e.amount)+" Gold ("+n(e.lowValue*e.amount)+"-"+n(e.highValue*e.amount)+")<br>Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Former Origin: "+e.formerOrigin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Reskin: "+e.reskin+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:t.innerHTML="Total Value: "+n(e.mediatorValue*e.amount)+" Gold ("+n(e.lowValue*e.amount)+"-"+n(e.highValue*e.amount)+")<br>Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Former Origin: "+e.formerOrigin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:"reskin"in e&&e.reskin!==""?t.innerHTML="Total Value: "+n(e.mediatorValue*e.amount)+" Gold ("+n(e.lowValue*e.amount)+"-"+n(e.highValue*e.amount)+")<br>Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Reskin: "+e.reskin+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated:t.innerHTML="Total Value: "+n(e.mediatorValue*e.amount)+" Gold ("+n(e.lowValue*e.amount)+"-"+n(e.highValue*e.amount)+")<br>Value: "+n(e.mediatorValue)+" Gold ("+n(e.lowValue)+"-"+n(e.highValue)+") ("+e.valueCertainty+" Certainty)<br>Origin: "+e.origin+"<br>Status: "+e.status+"<br>Rarity: "+e.rarity+"<br>Type: "+e.type+"<br>Subtype: "+e.subtype+"<br>Trade Locked: "+e.tradeLocked+"<br>Last Edited: "+e.dateUpdated}const i=document.getElementById("item-grid");i.style.display="none";window.addEventListener("keydown",e=>{if(!i.checkVisibility()&&!L.checkVisibility()&&!p.checkVisibility()&&!b.checkVisibility()&&!f.checkVisibility()&&!y.checkVisibility()&&!C.checkVisibility()&&!c.checkVisibility()&&!v.checkVisibility()&&!h){parseInt(e.key)>0&&parseInt(e.key)<=4&&(e.key==="1"?(e.preventDefault(),Ve()):e.key==="2"?(e.preventDefault(),ke()):e.key==="3"?(e.preventDefault(),me()):e.key==="4"&&(e.preventDefault(),Ee()));return}if(parseInt(e.key)>=0&&parseInt(e.key)<=9){for(const t of i.children)if(t.dataset.position===e.key){e.preventDefault(),t.click();break}else if(e.key==="0"&&t.dataset.position==="10"){e.preventDefault(),t.click();break}}});const p=document.getElementById("left-item-search");p.style.display="none";p.addEventListener("keydown",e=>{if(e.key==="Enter"){i.innerHTML="",p.style.display="none";const t=getComputedStyle(i).display;i.style.display=t==="grid"?"none":"grid";let a=0,o="";const d=[],r=[],s=[],g=[],T=[],E=[],k=[],m=[];ie.forEach(l=>{if(l.name.toLowerCase().includes(p.value.toLowerCase())||l.abbreviations.toLowerCase().includes(p.value.toLowerCase())){if(l.name.toLowerCase()===p.value.toLowerCase()||l.abbreviations.toLowerCase()===p.value.toLowerCase()){E.push(l);return}if(l.name.toLowerCase().startsWith(p.value.toLowerCase())){k.push(l);return}if(l.name.toLowerCase().includes((" "+p.value).toLowerCase())){m.push(l);return}if(l.abbreviations.toLowerCase().includes(p.value.toLowerCase())){g.push(l);return}r.push(l)}}),d.push(...E),d.push(...T),d.push(...k),d.push(...m),d.push(...g),d.push(...s),d.push(...r),d.forEach(l=>{if(l.name.toLowerCase().includes(p.value.toLowerCase())||l.abbreviations.toLowerCase().includes(p.value.toLowerCase())){a+=1,o=l;const u=document.createElement("button");u.className="cardDisplay-item-left",u.style.color=S(l.rarity),u.style.borderColor=R(l.rarity),u.textContent=l.name,u.dataset.position=a,u.dataset.itemName=l.name,i.appendChild(u),ce(l,u),u.addEventListener("click",()=>{G(),p.style.display="none",V=l,L.style.display="flex",L.value="",h=!0,L.focus(),i.style.display="none",i.innerHTML="",p.value=""})}}),p.value="",a===0?i.style.display="none":a===1&&(p.style.display="none",V=o,L.style.display="flex",L.value="",L.focus(),i.style.display="none",i.innerHTML="",p.value="")}});const L=document.getElementById("left-item-amount");L.style.display="none";L.addEventListener("keydown",function(e){if(e.key==="Enter"){const t=parseInt(L.value);if(isNaN(t)||t<=0)return;L.style.display="none";const a=V,o="left-item-"+a.name;let d=!1;if(document.getElementById(o)&&(d=!0),d){i.style.display="none",i.innerHTML="",document.getElementById("left-item-frame");const r=document.getElementById(o);r.textContent=a.name+" x"+(t+parseInt(r.dataset.amount)).toString(),r.dataset.amount=t+parseInt(r.dataset.amount),D+=a.mediatorValue*t,N+=a.lowValue*t,O+=a.highValue*t,de(a,t),q.textContent=`Value: ${n(D)} Gold (${n(N)}-${n(O)})`;let s=document.getElementById(o+"-tooltip");a.amount=parseInt(r.dataset.amount),pe(a,s),w()}else{ge+=1,i.style.display="none",i.innerHTML="";const r=document.getElementById("left-item-frame"),s=document.createElement("button"),g=ye(a,s,o,t);g.dataset.tooltipstatus="used",s.id=o,s.className="cardDisplay-item-left",s.style.color=S(a.rarity),s.style.borderColor=R(a.rarity),s.textContent=a.name+" x"+t,s.dataset.info=a,s.dataset.itemName=a.name,s.dataset.amount=t,r.appendChild(s),D+=a.mediatorValue*t,N+=a.lowValue*t,O+=a.highValue*t,q.textContent=`Value: ${n(D)} Gold (${n(N)}-${n(O)})`,de(a,t),w(),s.addEventListener("click",()=>{ge-=s.dataset.amount,D-=a.mediatorValue*s.dataset.amount,N-=a.lowValue*s.dataset.amount,O-=a.highValue*s.dataset.amount,ve(a,s.dataset.amount),q.textContent=`Value: ${n(D)} Gold (${n(N)}-${n(O)})`,w(),s.remove(),g.remove()})}}});const f=document.getElementById("right-item-search");f.style.display="none";const b=document.getElementById("right-item-amount");b.style.display="none";f.addEventListener("keydown",e=>{if(e.key==="Enter"){i.innerHTML="",f.style.display="none";const t=getComputedStyle(i).display;i.style.display=t==="grid"?"none":"grid";let a=0,o="";const d=[],r=[],s=[],g=[],T=[],E=[],k=[],m=[];ie.forEach(l=>{if(l.name.toLowerCase().includes(f.value.toLowerCase())||l.abbreviations.toLowerCase().includes(f.value.toLowerCase())){if(l.name.toLowerCase()===f.value.toLowerCase()||l.abbreviations.toLowerCase()===f.value.toLowerCase()){E.push(l);return}if(l.name.toLowerCase().startsWith(f.value.toLowerCase())){k.push(l);return}if(l.name.toLowerCase().includes((" "+f.value).toLowerCase())){m.push(l);return}if(l.abbreviations.toLowerCase().includes(f.value.toLowerCase())){g.push(l);return}r.push(l)}}),d.push(...E),d.push(...T),d.push(...k),d.push(...m),d.push(...g),d.push(...s),d.push(...r),d.forEach(l=>{if(l.name.toLowerCase().includes(f.value.toLowerCase())||l.abbreviations.toLowerCase().includes(f.value.toLowerCase())){a+=1,o=l;const u=document.createElement("button");u.className="cardDisplay-item-right",u.style.color=S(l.rarity),u.style.borderColor=R(l.rarity),u.textContent=l.name,u.dataset.position=a,u.dataset.itemName=l.name,i.appendChild(u),ce(l,u),u.addEventListener("click",()=>{G(),f.style.display="none",V=l,b.style.display="flex",b.value="",h=!0,b.focus(),i.style.display="none",i.innerHTML="",f.value=""})}}),f.value="",a===0?i.style.display="none":a===1&&(f.style.display="none",V=o,b.style.display="flex",b.value="",b.focus(),i.style.display="none",i.innerHTML="",f.value="")}});b.addEventListener("keydown",function(e){if(e.key==="Enter"){const t=parseInt(b.value);if(isNaN(t)||t<=0)return;b.style.display="none";const a=V,o="right-item-"+a.name;let d=!1;if(document.getElementById(o)&&(d=!0),d){i.style.display="none",i.innerHTML="",document.getElementById("right-item-frame");const r=document.getElementById(o);r.textContent=a.name+" x"+(t+parseInt(r.dataset.amount)).toString(),r.dataset.amount=t+parseInt(r.dataset.amount),z+=a.mediatorValue*t,F+=a.lowValue*t,U+=a.highValue*t,ue(a,t),J.textContent=`Value: ${n(z)} Gold (${n(F)}-${n(U)})`;let s=document.getElementById(o+"-tooltip");a.amount=parseInt(r.dataset.amount),pe(a,s),w()}else{he+=1,i.style.display="none",i.innerHTML="";const r=document.getElementById("right-item-frame"),s=document.createElement("button"),g=ye(a,s,o,t,!0);g.dataset.tooltipstatus="used",s.id=o,s.className="cardDisplay-item-right",s.style.color=S(a.rarity),s.style.borderColor=R(a.rarity),s.textContent=a.name+" x"+t,s.dataset.info=a,s.dataset.itemName=a.name,s.dataset.amount=t,r.appendChild(s),z+=a.mediatorValue*t,F+=a.lowValue*t,U+=a.highValue*t,ue(a,t),J.textContent=`Value: ${n(z)} Gold (${n(F)}-${n(U)})`,w(),s.addEventListener("click",()=>{he-=s.dataset.amount,z-=a.mediatorValue*s.dataset.amount,F-=a.lowValue*s.dataset.amount,U-=a.highValue*s.dataset.amount,we(a,s.dataset.amount),J.textContent=`Value: ${n(z)} Gold (${n(F)}-${n(U)})`,w(),s.remove(),g.remove()})}}});const y=document.getElementById("left-card-search");y.style.display="none";const C=document.getElementById("left-card-amount");C.style.display="none";y.addEventListener("keydown",e=>{if(e.key==="Enter"){i.innerHTML="",y.style.display="none";const t=getComputedStyle(i).display;i.style.display=t==="grid"?"none":"grid";let a=0,o="";const d=[],r=[],s=[],g=[],T=[],E=[],k=[],m=[];oe.forEach(l=>{if(l.name.toLowerCase().includes(y.value.toLowerCase())||l.abbreviations.toLowerCase().includes(y.value.toLowerCase())){if(l.name.toLowerCase()===y.value.toLowerCase()||l.abbreviations.toLowerCase()===y.value.toLowerCase()){E.push(l);return}if(l.reskinAbbreviations.toLowerCase()===y.value.toLowerCase()||l.reskin.toLowerCase()===y.value.toLowerCase()){T.push(l);return}if(l.name.toLowerCase().startsWith(y.value.toLowerCase())){k.push(l);return}if(l.name.toLowerCase().includes((" "+y.value).toLowerCase())){m.push(l);return}if(l.abbreviations.toLowerCase().includes(y.value.toLowerCase())){g.push(l);return}if(l.reskinAbbreviations.toLowerCase().includes(y.value.toLowerCase())||l.reskin.toLowerCase().includes(y.value.toLowerCase())){s.push(l);return}r.push(l)}}),d.push(...E),d.push(...T),d.push(...k),d.push(...m),d.push(...g),d.push(...s),d.push(...r),d.forEach(l=>{if(l.name.toLowerCase().includes(y.value.toLowerCase())||l.abbreviations.toLowerCase().includes(y.value.toLowerCase())||l.reskin.toLowerCase().includes(y.value.toLowerCase())||l.reskinAbbreviations.toLowerCase().includes(y.value.toLowerCase())){a+=1,o=l;const u=document.createElement("button");u.className="cardDisplay-item-left",u.style.color=S(l.rarity),u.style.borderColor=R(l.rarity),u.textContent=l.name,u.dataset.position=a,u.dataset.itemName=l.name,i.appendChild(u),ce(l,u),u.addEventListener("click",()=>{G(),y.style.display="none",V=l,C.style.display="flex",C.value="",h=!0,C.focus(),i.style.display="none",i.innerHTML="",y.value=""})}}),y.value="",a===0?i.style.display="none":a===1&&(y.style.display="none",V=o,C.style.display="flex",C.value="",C.focus(),i.style.display="none",i.innerHTML="",y.value="")}});C.addEventListener("keydown",function(e){if(e.key==="Enter"){const t=parseInt(C.value);if(isNaN(t)||t<=0)return;C.style.display="none";const a=V,o="left-card-"+a.name;let d=!1;if(document.getElementById(o)&&(d=!0),d){i.style.display="none",i.innerHTML="",document.getElementById("left-card-frame");const r=document.getElementById(o);r.textContent=a.name+" x"+(t+parseInt(r.dataset.amount)).toString(),r.dataset.amount=t+parseInt(r.dataset.amount),X+=a.mediatorValue*t,W+=a.lowValue*t,A+=a.highValue*t,de(a,t),Q.textContent=`Value: ${n(X)} Gold (${n(W)}-${n(A)})`;let s=document.getElementById(o+"-tooltip");a.amount=parseInt(r.dataset.amount),pe(a,s),w()}else{Le+=1,i.style.display="none",i.innerHTML="";const r=document.getElementById("left-card-frame"),s=document.createElement("button"),g=ye(a,s,o,t);g.dataset.tooltipstatus="used",s.id=o,s.className="cardDisplay-card-left",s.style.color=S(a.rarity),s.style.borderColor=R(a.rarity),s.textContent=a.name+" x"+t,s.dataset.info=a,s.dataset.itemName=a.name,s.dataset.amount=t,r.appendChild(s),X+=a.mediatorValue*t,W+=a.lowValue*t,A+=a.highValue*t,de(a,t),Q.textContent=`Value: ${n(X)} Gold (${n(W)}-${n(A)})`,w(),s.addEventListener("click",()=>{Le-=s.dataset.amount,X-=a.mediatorValue*s.dataset.amount,W-=a.lowValue*s.dataset.amount,A-=a.highValue*s.dataset.amount,ve(a,s.dataset.amount),Q.textContent=`Value: ${n(X)} Gold (${n(W)}-${n(A)})`,w(),s.remove(),g.remove()})}}});const c=document.getElementById("right-card-search");c.style.display="none";const v=document.getElementById("right-card-amount");v.style.display="none";c.addEventListener("keydown",e=>{if(e.key==="Enter"){i.innerHTML="",c.style.display="none";const t=getComputedStyle(i).display;i.style.display=t==="grid"?"none":"grid";let a=0,o="";const d=[],r=[],s=[],g=[],T=[],E=[],k=[],m=[];oe.forEach(l=>{if(l.name.toLowerCase().includes(c.value.toLowerCase())||l.abbreviations.toLowerCase().includes(c.value.toLowerCase())){if(l.name.toLowerCase()===c.value.toLowerCase()||l.abbreviations.toLowerCase()===c.value.toLowerCase()){E.push(l);return}if(l.reskinAbbreviations.toLowerCase()===c.value.toLowerCase()||l.reskin.toLowerCase()===c.value.toLowerCase()){T.push(l);return}if(l.name.toLowerCase().startsWith(c.value.toLowerCase())){k.push(l);return}if(l.name.toLowerCase().includes((" "+c.value).toLowerCase())){m.push(l);return}if(l.abbreviations.toLowerCase().includes(c.value.toLowerCase())){g.push(l);return}if(l.reskinAbbreviations.toLowerCase().includes(c.value.toLowerCase())||l.reskin.toLowerCase().toLowerCase().includes(c.value.toLowerCase())){s.push(l);return}r.push(l)}}),d.push(...E),d.push(...T),d.push(...k),d.push(...m),d.push(...g),d.push(...s),d.push(...r),d.forEach(l=>{if(l.name.toLowerCase().includes(c.value.toLowerCase())||l.abbreviations.toLowerCase().includes(c.value.toLowerCase())||l.reskin.toLowerCase().includes(c.value.toLowerCase())||l.reskinAbbreviations.toLowerCase().includes(c.value.toLowerCase())){a+=1,o=l;const u=document.createElement("button");u.className="cardDisplay-item-right",u.style.color=S(l.rarity),u.style.borderColor=R(l.rarity),u.textContent=l.name,u.dataset.position=a,u.dataset.itemName=l.name,i.appendChild(u),ce(l,u),u.addEventListener("click",()=>{G(),c.style.display="none",V=l,v.style.display="flex",v.value="",h=!0,v.focus(),i.style.display="none",i.innerHTML="",c.value=""})}}),c.value="",a===0?i.style.display="none":a===1&&(c.style.display="none",V=o,v.style.display="flex",v.value="",v.focus(),i.style.display="none",i.innerHTML="",c.value="")}});v.addEventListener("keydown",function(e){if(e.key==="Enter"){const t=parseInt(v.value);if(isNaN(t)||t<=0)return;v.style.display="none";const a=V,o="right-card-"+a.name;let d=!1;if(document.getElementById(o)&&(d=!0),d){i.style.display="none",i.innerHTML="",document.getElementById("right-card-frame");const r=document.getElementById(o);r.textContent=a.name+" x"+(t+parseInt(r.dataset.amount)).toString(),r.dataset.amount=t+parseInt(r.dataset.amount),K+=a.mediatorValue*t,Y+=a.lowValue*t,P+=a.highValue*t,ue(a,t),Z.textContent=`Value: ${n(K)} Gold (${n(Y)}-${n(P)})`;let s=document.getElementById(o+"-tooltip");a.amount=parseInt(r.dataset.amount),pe(a,s),w()}else{be+=1,i.style.display="none",i.innerHTML="";const r=document.getElementById("right-card-frame"),s=document.createElement("button"),g=ye(a,s,o,t);g.dataset.tooltipstatus="used",s.id=o,s.className="cardDisplay-card-right",s.style.color=S(a.rarity),s.style.borderColor=R(a.rarity),s.textContent=a.name+" x"+t,s.dataset.info=a,s.dataset.itemName=a.name,s.dataset.amount=t,r.appendChild(s),K+=a.mediatorValue*t,Y+=a.lowValue*t,P+=a.highValue*t,ue(a,t),Z.textContent=`Value: ${n(K)} Gold (${n(Y)}-${n(P)})`,w(),s.addEventListener("click",()=>{be-=s.dataset.amount,K-=a.mediatorValue*s.dataset.amount,Y-=a.lowValue*s.dataset.amount,P-=a.highValue*s.dataset.amount,we(a,s.dataset.amount),Z.textContent=`Value: ${n(K)} Gold (${n(Y)}-${n(P)})`,w(),s.remove(),g.remove()})}}});const B=document.getElementById("gold-left");B.addEventListener("blur",e=>{h=!1,B.blur();const t=parseInt(B.value);if(isNaN(t)||t<=0){B.value="";return}B.value=n(t)+" Gold ("+n(t*.85)+")",ee=t,H+=t,le+=t,ae+=t,$()});B.addEventListener("focus",()=>{h=!0,B.value="",H-=ee,le-=ee,ae-=ee,ee=0,$()});const x=document.getElementById("gold-right");x.addEventListener("blur",e=>{h=!1,x.blur();const t=parseInt(x.value);if(isNaN(t)||t<=0){x.value="";return}x.value=n(t)+" Gold ("+n(t*.85)+")",te=t,M+=t,ne+=t,se+=t,$()});x.addEventListener("focus",()=>{h=!0,x.value="",M-=te,ne-=te,se-=te,te=0,$()});B.addEventListener("keydown",e=>{e.key==="Enter"&&B.blur()});x.addEventListener("keydown",e=>{e.key==="Enter"&&x.blur()});function n(e){return e>=1e12?(e/1e12).toFixed(1).replace(/\.0$/,"")+"T":e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}function w(){const e=document.getElementById("left-card-frame"),t=document.getElementById("right-card-frame");if(document.getElementById("left-item-frame"),document.getElementById("right-item-frame"),j(q),j(J),j(Q),j(Z),j(I),j(_),window.innerWidth>1365&&window.innerHeight>767){document.getElementById("title").style.display="block",e.style.gap="5px",t.style.gap="5px";return}document.getElementById("title").style.display="none",e.style.gap="0px",t.style.gap="0px"}function j(e){if(window.innerWidth>1365&&window.innerHeight>767){e.style.fontSize="",e!==I&&e!==_&&(e.style.top=""),e.style.right="";return}e===q?e.textContent.length>13&&(e.style.fontSize="75%",e.style.top="13%",e.style.right="72%"):e===J?e.textContent.length>13&&(e.style.fontSize="75%",e.style.top="13%",e.style.left="73%"):e===Q?e.textContent.length>13&&(e.style.fontSize="75%",e.style.top="13%",e.style.right="55%"):e===Z?e.textContent.length>13&&(e.style.fontSize="75%",e.style.top="13%",e.style.right="11%"):e===I?e.textContent.length>13&&(e.style.fontSize="75%",e.style.right="42.5%"):e===_&&e.textContent.length>13&&(e.style.fontSize="75%",e.style.right="24%")}window.addEventListener("resize",()=>{w()});function R(e){if(e==="None")return"rgb(255, 255, 255)";if(e==="Common")return"rgb(255, 255, 255)";if(e==="Rare")return"rgb(0, 255, 17)";if(e==="Ultra Rare")return"rgb(255, 247, 7)";if(e==="Legendary")return"rgb(7, 255, 234)"}function S(e){if(e==="None")return"rgb(255, 255, 255)";if(e==="Common")return"rgb(255, 255, 255)";if(e==="Rare")return"rgb(0, 255, 17)";if(e==="Ultra Rare")return"rgb(255, 247, 7)";if(e==="Legendary")return"rgb(7, 255, 234)"}function Ce(e){e==="calc"?window.location.href="calc.html":e==="values"&&(window.location.href="values.html")}function re(){G(),p.style.display="none",L.style.display="none",i.style.display="none",i.innerHTML="",f.style.display="none",b.style.display="none",v.style.display="none",c.style.display="none",C.style.display="none",y.style.display="none"}function Ve(){G();const e=document.getElementById("left-item-search");i.innerHTML="",i.style.display==="none"&&L.style.display==="none"&&e.style.display==="none"&&f.style.display==="none"&&b.style.display==="none"&&v.style.display==="none"&&c.style.display==="none"&&C.style.display==="none"&&y.style.display==="none"?(e.style.display="flex",h=!0,e.focus()):re()}function Ee(){G();const e=document.getElementById("right-item-search");i.innerHTML="",i.style.display==="none"&&b.style.display==="none"&&e.style.display==="none"&&p.style.display==="none"&&L.style.display==="none"&&C.style.display==="none"&&y.style.display==="none"&&v.style.display==="none"&&c.style.display==="none"?(e.style.display="flex",h=!0,e.focus()):re()}function ke(){G();const e=document.getElementById("left-card-search");i.innerHTML="",i.style.display==="none"&&C.style.display==="none"&&e.style.display==="none"&&f.style.display==="none"&&v.style.display==="none"&&c.style.display==="none"&&p.style.display==="none"&&L.style.display==="none"&&b.style.display==="none"?(e.style.display="flex",h=!0,e.focus()):re()}function me(){G();const e=document.getElementById("right-card-search");i.innerHTML="",i.style.display==="none"&&v.style.display==="none"&&e.style.display==="none"&&C.style.display==="none"&&y.style.display==="none"&&p.style.display==="none"&&L.style.display==="none"&&b.style.display==="none"&&f.style.display==="none"?(e.style.display="flex",h=!0,e.focus()):re()}p.addEventListener("blur",()=>{h=!1});f.addEventListener("blur",()=>{h=!1});y.addEventListener("blur",()=>{h=!1});c.addEventListener("blur",()=>{h=!1});L.addEventListener("blur",()=>{h=!1});b.addEventListener("blur",()=>{h=!1});C.addEventListener("blur",()=>{h=!1});v.addEventListener("blur",()=>{h=!1});async function Be(){for(;oe.length===0||ie.length===0;){await new Promise(a=>setTimeout(a,500));const[e,t]=await Promise.all([Ie(),_e()]);oe=e,ie=t}}window.addEventListener("DOMContentLoaded",()=>{document.getElementById("add-item-left").addEventListener("click",Ve),document.getElementById("add-item-right").addEventListener("click",Ee),document.getElementById("add-card-left").addEventListener("click",ke),document.getElementById("add-card-right").addEventListener("click",me),document.getElementById("valButton").addEventListener("click",()=>Ce("values")),document.getElementById("calcButton").addEventListener("click",()=>Ce("calc")),q=document.getElementById("left-item-value"),J=document.getElementById("right-item-value"),Q=document.getElementById("left-card-value"),Z=document.getElementById("right-card-value"),I=document.getElementById("left-global-value"),_=document.getElementById("right-global-value"),Be(),w()});
